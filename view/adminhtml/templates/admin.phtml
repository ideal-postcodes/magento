<?php /** @var Magento\Framework\View\TemplateEngine\Php $this */

$helper = $this->helper('Idealpostcodes\Ukaddresssearch\Helper\Data'); ?>

<script type="text/javascript" name="Ideal_Postcodes">
    requirejs(['jquery'], function(jQuery) {
        jQuery(function() {
    var apiKey = "<?php echo $helper->getConfig('api_key'); ?>";
    var autocomplete = <?php echo $helper->getAdminConfig(
        'addressAutocomplete'
    ); ?>;
    var populateOrganisation = <?php echo $helper->getConfig(
        'populateOrganisation'
    ); ?>;
    var populateCounty = <?php echo $helper->getConfig('requireCounty'); ?>;
    var enabled = <?php echo $helper->getConfig('enabled'); ?>;
    var customFields = <?php echo $helper->getConfig('customFields'); ?>;

    // Exit early if disabled
    if (enabled === false) return;
    window.idpcConfig = {
      apiKey: apiKey,
      postcodeLookup: false,
      autocomplete: autocomplete,
      populateCounty: populateCounty,
      populateOrganisation: populateOrganisation,
      hoistCountry: false,
      customFields: customFields
    };

    if (window.idpcStart) window.idpcStart();
  });
});
</script>
